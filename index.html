<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Polska Mapa Fotowoltaiki – wkrótce</title>
    <meta
      name="description"
      content="Polska Mapa Fotowoltaiki — lista oczekujących. Zapisz się, aby dostać dostęp do usługi i bazy danych klientów pod magazyny energii przed innymi."
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;500&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        --overlay: rgba(12, 70, 160, 0.86);
        --text: #ffffff;
        --muted: rgba(255, 255, 255, 0.84);
        --card: rgba(255, 255, 255, 0.14);
        --border: rgba(255, 255, 255, 0.22);
        --error: rgba(255, 255, 255, 0.90);
      }

      * { box-sizing: border-box; }

      body {
        margin: 0;
        min-height: 100vh;
        color: var(--text);
        font-family: "Roboto", system-ui, -apple-system, Segoe UI, Arial, sans-serif;
        background-image: url("manny-becerra-VgF9kogcU1U-unsplash%20%281%29.jpg");
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
      }

      .overlay {
        min-height: 100vh;
        display: grid;
        grid-template-columns: 1fr 1fr;
        position: relative;
      }

      .overlay::before {
        content: "";
        position: absolute;
        inset: 0 auto 0 0;
        width: 50%;
        background: var(--overlay);
        -webkit-backdrop-filter: blur(2px);
        backdrop-filter: blur(2px);
      }

      .left {
        position: relative;
        padding: clamp(24px, 5vw, 56px);
        display: flex;
        align-items: center;
      }

      .content {
        max-width: 680px;
        width: 100%;
      }

      h1 {
        margin: 0 0 14px;
        font-weight: 500;
        letter-spacing: 0.2px;
        font-size: clamp(30px, 3.2vw, 46px);
        text-shadow: 0 1px 12px rgba(0, 0, 0, 0.28);
      }

      .lead {
        margin: 0 0 16px;
        font-weight: 300;
        color: var(--muted);
        font-size: clamp(15px, 1.35vw, 18px);
        line-height: 1.5;
        text-shadow: 0 1px 10px rgba(0, 0, 0, 0.30);
      }

      .promise {
        margin: 0 0 22px;
        font-weight: 300;
        color: var(--muted);
        font-size: clamp(15px, 1.35vw, 18px);
        line-height: 1.5;
        padding: 14px 14px;
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 10px;
        text-shadow: 0 1px 10px rgba(0, 0, 0, 0.24);
      }

      form {
        margin-top: 18px;
        display: grid;
        gap: 12px;
      }

      .row {
        display: grid;
        grid-template-columns: 1fr auto;
        gap: 10px;
      }

      input[type="email"] {
        width: 100%;
        padding: 12px 12px;
        border-radius: 10px;
        border: 1px solid var(--border);
        background: rgba(0, 0, 0, 0.20);
        color: var(--text);
        outline: none;
        font-size: 16px;
      }

      input[type="email"]::placeholder { color: rgba(255, 255, 255, 0.75); }

      button {
        padding: 12px 16px;
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.35);
        background: rgba(255, 255, 255, 0.16);
        color: var(--text);
        font-weight: 500;
        cursor: pointer;
        white-space: nowrap;
      }

      button:hover { background: rgba(255, 255, 255, 0.22); }
      button:disabled { cursor: not-allowed; opacity: 0.65; }

      .consent {
        display: grid;
        gap: 10px;
        padding: 12px 12px;
        border-radius: 10px;
        background: rgba(0, 0, 0, 0.18);
        border: 1px solid var(--border);
      }

      .checkbox {
        display: flex;
        gap: 10px;
        align-items: flex-start;
        font-size: 13px;
        line-height: 1.35;
        color: rgba(255, 255, 255, 0.92);
      }

      .checkbox input { margin-top: 2px; }

      .rodo {
        font-size: 12px;
        line-height: 1.35;
        color: rgba(255, 255, 255, 0.84);
      }

      .rodo a { color: rgba(255, 255, 255, 0.92); }

      .rodo-details summary {
        cursor: pointer;
        font-size: 13px;
        color: rgba(255, 255, 255, 0.92);
      }

      .rodo-details[open] summary { margin-bottom: 8px; }

      .status {
        min-height: 18px;
        font-size: 13px;
        color: rgba(255, 255, 255, 0.92);
      }

      .status.error { color: var(--error); }

      .right {
        position: relative;
      }

      .slider {
        position: absolute;
        top: clamp(16px, 2.6vw, 28px);
        right: clamp(16px, 2.6vw, 28px);
        width: min(580px, 55vw);
        aspect-ratio: 16 / 10;
        border-radius: 14px;
        border: 1px solid rgba(255, 255, 255, 0.22);
        background: rgba(0, 0, 0, 0.20);
        overflow: hidden;
        box-shadow: 0 14px 50px rgba(0, 0, 0, 0.35);
        -webkit-backdrop-filter: blur(2px);
        backdrop-filter: blur(2px);
      }

      .slides {
        height: 100%;
        display: flex;
        transition: transform 400ms ease;
      }

      .slide {
        margin: 0;
        min-width: 100%;
        height: 100%;
        display: grid;
        place-items: center;
        background: rgba(0, 0, 0, 0.10);
      }

      .slide img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        background: rgba(0, 0, 0, 0.18);
        display: block;
      }

      .nav {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        width: 34px;
        height: 34px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.35);
        background: rgba(0, 0, 0, 0.28);
        color: rgba(255, 255, 255, 0.95);
        cursor: pointer;
        display: grid;
        place-items: center;
        user-select: none;
      }

      .nav.prev { left: 10px; }
      .nav.next { right: 10px; }
      .nav:hover { background: rgba(0, 0, 0, 0.38); }

      .dots {
        position: absolute;
        left: 0;
        right: 0;
        bottom: 10px;
        display: flex;
        justify-content: center;
        gap: 6px;
        padding: 0 10px;
      }

      .dot {
        width: 8px;
        height: 8px;
        border-radius: 999px;
        border: 1px solid rgba(255, 255, 255, 0.6);
        background: rgba(255, 255, 255, 0.15);
        cursor: pointer;
      }

      .dot.active {
        background: rgba(255, 255, 255, 0.85);
      }

      @media (max-width: 900px) {
        .overlay { grid-template-columns: 1fr; }
        .overlay::before { width: 100%; }

        .slider {
          position: relative;
          top: auto;
          right: auto;
          margin: 14px 14px 0;
          width: auto;
          aspect-ratio: 16 / 9;
        }
      }
    </style>
  </head>
  <body>
    <main class="overlay">
      <section class="left">
        <div class="content">
          <h1>Polska Mapa Fotowoltaiki</h1>

          <p class="lead">
            Dane adresowe dachów z fotowoltaiką w całej Polsce – skontaktuj się z klientem zanim ruszą dofinansowania na magazyny energii i zanim zrobi to konkurencja
          </p>

          <div class="promise">
            Zapisz się na listę oczekujących, aby dostać dostęp do usługi i bazy danych klientów pod magazyny energii przed innymi.
          </div>

          <form
            id="waitlistForm"
            action=""
            method="POST"
            novalidate
          >
            <input type="text" name="_gotcha" style="display:none" tabindex="-1" autocomplete="off" />

            <div class="row">
              <input
                type="email"
                name="email"
                placeholder="Twój e-mail"
                required
                autocomplete="email"
                inputmode="email"
              />
              <button type="submit" id="submitBtn">Powiadom mnie</button>
            </div>

            <div class="consent">
              <label class="checkbox">
                <input type="checkbox" name="rodo_consent" required />
                <span>
                  Wyrażam zgodę na przetwarzanie mojego adresu e-mail przez Polska Mapa Fotowoltaiki, Jakub Dryjas w celu dopisania do listy oczekujących i wysłania informacji o starcie usługi / udostępnieniu bazy.
                </span>
              </label>

              <details class="rodo-details">
                <summary>Informacja RODO (rozwiń)</summary>
                <div class="rodo">
                  Administrator danych: Polska Mapa Fotowoltaiki, Jakub Dryjas, Siennicka 27A/446, 04-394 Warszawa, kontakt: <a href="mailto:kontakt@mapafotowoltaiki.pl">kontakt@mapafotowoltaiki.pl</a>.<br />
                  Cel: lista oczekujących i kontakt w sprawie startu usługi. Podstawa: zgoda (art. 6 ust. 1 lit. a RODO).<br />
                  Okres: do wycofania zgody lub maks. 24 miesiące od zapisu (co nastąpi wcześniej).<br />
                  Masz prawo dostępu, sprostowania, usunięcia, ograniczenia, przenoszenia danych oraz cofnięcia zgody w dowolnym momencie (kontakt e-mail powyżej). Podanie e-maila jest dobrowolne, ale konieczne do powiadomienia.
                </div>
              </details>
            </div>

            <div class="status" id="status" aria-live="polite"></div>
          </form>
        </div>
      </section>

      <section class="right" aria-label="Podgląd produktu">
        <div class="slider" id="slider" aria-roledescription="carousel">
          <div class="slides" id="slides">
            <figure class="slide">
              <img src="visuals/1_img_slider.png" alt="Podgląd produktu — ekran 1" loading="lazy" />
            </figure>
            <figure class="slide">
              <img src="visuals/2_img_slider.png" alt="Podgląd produktu — ekran 2" loading="lazy" />
            </figure>
            <figure class="slide">
              <img src="visuals/3_img_slider.png" alt="Podgląd produktu — ekran 3" loading="lazy" />
            </figure>
          </div>

          <button class="nav prev" type="button" aria-label="Poprzedni slajd" data-dir="-1">‹</button>
          <button class="nav next" type="button" aria-label="Następny slajd" data-dir="1">›</button>

          <div class="dots" id="dots" aria-label="Wybór slajdu"></div>
        </div>
      </section>
    </main>

    <script>
      // Wklej tutaj endpoint z Formspree w formacie: https://formspree.io/f/<id>
      const FORMSPREE_ENDPOINT = "https://formspree.io/f/mvzgekar";

      const form = document.getElementById("waitlistForm");
      const statusEl = document.getElementById("status");
      const submitBtn = document.getElementById("submitBtn");

      function setStatus(message, isError) {
        statusEl.textContent = message;
        statusEl.classList.toggle("error", Boolean(isError));
      }

      function isValidEndpoint(value) {
        return typeof value === "string" && value.startsWith("https://formspree.io/f/") && value.length > "https://formspree.io/f/".length;
      }

      if (!isValidEndpoint(FORMSPREE_ENDPOINT)) {
        submitBtn.disabled = true;
        setStatus("Konfiguracja wymagana: wklej endpoint Formspree w kodzie strony (FORMSPREE_ENDPOINT).", true);
      } else {
        form.action = FORMSPREE_ENDPOINT;
      }

      form.addEventListener("submit", async (e) => {
        if (!isValidEndpoint(FORMSPREE_ENDPOINT)) {
          e.preventDefault();
          setStatus("Formularz nie jest jeszcze skonfigurowany.", true);
          return;
        }

        e.preventDefault();
        submitBtn.disabled = true;
        setStatus("Wysyłanie…");

        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), 10000);

        try {
          const response = await fetch(FORMSPREE_ENDPOINT, {
            method: "POST",
            body: new FormData(form),
            headers: { "Accept": "application/json" },
            signal: controller.signal
          });

          if (response.ok) {
            form.reset();
            setStatus("Dziękuję! Jeśli wszystko poszło OK, jesteś na liście oczekujących.");
            return;
          }

          setStatus("Nie udało się wysłać formularza. Spróbuj ponownie za chwilę.", true);
        } catch (err) {
          setStatus("Błąd wysyłki (timeout lub problem z siecią). Spróbuj ponownie.", true);
        } finally {
          clearTimeout(timeoutId);
          submitBtn.disabled = false;
        }
      });

      // Slider
      const slider = document.getElementById("slider");
      const slidesEl = document.getElementById("slides");
      const dotsEl = document.getElementById("dots");
      const slideCount = slidesEl ? slidesEl.children.length : 0;

      let index = 0;
      let timerId = null;

      function renderDots() {
        if (!dotsEl) return;
        dotsEl.innerHTML = "";
        for (let i = 0; i < slideCount; i++) {
          const b = document.createElement("button");
          b.type = "button";
          b.className = "dot" + (i === index ? " active" : "");
          b.setAttribute("aria-label", `Slajd ${i + 1}`);
          b.addEventListener("click", () => goTo(i));
          dotsEl.appendChild(b);
        }
      }

      function applyTransform() {
        if (!slidesEl) return;
        slidesEl.style.transform = `translateX(${-index * 100}%)`;
        renderDots();
      }

      function goTo(i) {
        index = (i + slideCount) % slideCount;
        applyTransform();
      }

      function step(dir) {
        goTo(index + dir);
      }

      function start() {
        if (timerId || slideCount <= 1) return;
        timerId = setInterval(() => step(1), 5000);
      }

      function stop() {
        if (!timerId) return;
        clearInterval(timerId);
        timerId = null;
      }

      if (slider && slideCount > 0) {
        slider.querySelectorAll(".nav").forEach((btn) => {
          btn.addEventListener("click", () => step(Number(btn.dataset.dir || "1")));
        });

        slider.addEventListener("mouseenter", stop);
        slider.addEventListener("mouseleave", start);

        applyTransform();
        start();
      }
    </script>
  </body>
</html>
